<app-sidenav></app-sidenav>
<div class="container">
  <div class="row">
    <div class="col-lg-11">
      <h1>Group Mail Notification</h1>
    </div>

  </div>
  <br>
  <div>
    <div class='pull-right'>
      <div class="col-sm-1 button">
        <button mat-raised-button color="primary" (click)="openMail()">
          <i class="fas fa-plus-circle"></i> Add Mail</button>
      </div>
    </div>
    <mat-table #table [dataSource]="dataSource" matSort matSortActive="id" matSortDirection="desc" matSortDisableClear class="mat-elevation-z8">

      <ng-container matColumnDef="Id">
        <mat-header-cell *matHeaderCellDef mat-sort-header='id'> S.No </mat-header-cell>
        <mat-cell *matCellDef="let row"> {{row.id}} </mat-cell>
      </ng-container>


      <ng-container matColumnDef="Mail">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Mail </mat-header-cell>
        <mat-cell *matCellDef="let row"> {{row.mail}} </mat-cell>
      </ng-container>


      <ng-container matColumnDef="Actions">
        <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
        <mat-cell *matCellDef="let row">
          <i class="fa fa-pencil-alt" (click)='openupdateMail(row)' style="cursor: pointer;" aria-hidden="true"></i>
          <i class="col-lg-3 fa fa-trash" (click)="deleteMail(row)" style="cursor: pointer;" aria-hidden="true"></i>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>


    <mat-paginator [pageSize]="25" [pageSizeOptions]="[25, 50, 100]" [showFirstLastButtons]="true" ></mat-paginator>
  </div>



  <!-- add mail model -->

  <modal #addmail>
      <modal-header>
        <h4>Add Mail</h4>
      </modal-header>
      <modal-body>
       
        <div>        
            <input type="email" class="form-control" [(ngModel)]="data.mail"
              aria-describedby="emailHelp" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" name="mail" placeholder="mail" required #mail="ngModel">                  
            <div style="color:red;" *ngIf="mail.errors && (mail.dirty || mail.touched)">
              <p *ngIf="mail.errors.pattern">Email Format is not valid</p>
            </div>
        </div>
      </modal-body>
      <modal-footer>
        <button mat-raised-button class="closeModalButton" [disabled]="data.mail === ''" (click)="addMail()">Add</button>
        <button mat-raised-button class="closeModalButton" (click)="cancelMail()">Cancel</button>
      </modal-footer>
    </modal>




<!-- update mail model -->

<modal #updatemail>
  <modal-header>
    <h4>Add Mail</h4>
  </modal-header>
  <modal-body>
   
    <div>        
      <input type="email" class="form-control" [(ngModel)]="data.mail"
        aria-describedby="emailHelp" name="mail" placeholder="mail" required>                  
  </div>
  </modal-body>
  <modal-footer>
    <button mat-raised-button class="closeModalButton" [disabled]="data.mail === ''" (click)="updateMail()">Update</button>
    <button mat-raised-button class="closeModalButton" (click)="cancelMail()">Cancel</button>
  </modal-footer>
</modal>

</div>